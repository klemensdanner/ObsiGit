---
Arbeitszeit: 4.91
RÃ¼ckentraining: false
Schlafzeit: 9
HandyScreenOn: 4.2
cssclasses:
  - wide-page
---




```timekeep
{"entries":[{"name":"BWLT1","startTime":null,"endTime":null,"subEntries":[{"name":"Part 1","startTime":"2025-12-14T14:34:19.491Z","endTime":"2025-12-14T14:52:28.940Z","subEntries":null},{"name":"Part 3","startTime":"2025-12-14T17:09:19.000Z","endTime":"2025-12-14T17:59:45.000Z","subEntries":null},{"name":"Part 4","startTime":"2025-12-14T18:04:55.302Z","endTime":"2025-12-14T19:30:14.535Z","subEntries":null},{"name":"Part 5","startTime":"2025-12-14T19:58:29.000Z","endTime":"2025-12-14T21:48:08.000Z","subEntries":null},{"name":"Part 6","startTime":"2025-12-14T22:42:18.857Z","endTime":"2025-12-14T23:13:33.615Z","subEntries":null}]}]}
```







# ðŸš€ Life Engineering Dashboard

> [!info] Info
> Dieses Dashboard synchronisiert Daten aus Timekeep und visualisiert die letzten 7 Tage.

## ðŸ“Š Performance Ãœbersicht


--- start-multi-column: ExampleRegion1
```column-settings  
number of columns: 2
```


### âš’ï¸ Arbeitszeit (7 Tage)

```tracker
searchType: frontmatter
searchTarget: Arbeitszeit
folder: _DailyNotes
startDate: -7d
endDate: 0d
line:
    title: "Stunden pro Tag"
    yAxisLabel: "h"
    lineColor: "#7f5af0"
    showPoint: true
    xAxisTickLabelFormat: "dd"

```

--- end-column ---

### RÃ¼ckentraining (7 Tage)
```tracker
searchType: frontmatter
searchTarget: RÃ¼ckentraining
folder: _DailyNotes
startDate: -7d
endDate: 0d
bar:
    title: "Erledigt (Boolean)"
    yAxisLabel: "Status"
    barColor: "#2cb67d"
    yMin: 0
    yMax: 1
    xAxisTickLabelFormat: "dd"
```

--- end-multi-column










--- start-multi-column: ExampleRegion1
```column-settings  
number of columns: 2
```


### âš’ï¸ Arbeitszeit (7 Tage)

```tracker
searchType: frontmatter
searchTarget: Schlafzeit
folder: _DailyNotes
startDate: -7d
endDate: 0d
line:
    title: "Stunden pro Tag"
    yAxisLabel: "h"
    lineColor: "#7f5af0"
    showPoint: true
    xAxisTickLabelFormat: "dd"

```

--- end-column ---

### RÃ¼ckentraining (7 Tage)
```tracker
searchType: frontmatter
searchTarget: HandyScreenOn
folder: _DailyNotes
startDate: -7d
endDate: 0d
line:
    title: "Stunden pro Tag"
    yAxisLabel: "h"
    lineColor: "#7f5af0"
    showPoint: true
    xAxisTickLabelFormat: "dd"
```

--- end-multi-column








```dataviewjs
// 1. Konfiguration: Ordner anpassen!
const folder = '"_DailyNotes"'; 

// --- HILFSFUNKTIONEN & INITIALISIERUNG ---

// Berechne das Datum des letzten Montags (Start der Woche) um 00:00 Uhr
const today = new Date();
const dayOfWeek = today.getDay(); // 0 (So) - 6 (Sa)
// Wir wollen den Montag (1). Wenn heute Sonntag (0) ist, mÃ¼ssen wir 6 Tage zurÃ¼ck.
// Wenn heute Montag (1) ist, 0 Tage zurÃ¼ck.
const diffToMonday = (dayOfWeek + 6) % 7; 
const lastMonday = new Date(today);
lastMonday.setDate(today.getDate() - diffToMonday);
lastMonday.setHours(0, 0, 0, 0);

// Container fÃ¼r die Zeiten
let projectTimesTotal = {}; 
let projectTimesWeekly = {};
let totalTimeGlobal = 0;
let totalTimeWeekly = 0;

// 2. Alle Seiten aus dem Ordner holen (auÃŸer der aktuellen)
const pages = dv.pages(folder).where(p => p.file.name != dv.current().file.name);

// 3. Durch alle Dateien loopen
await Promise.all(pages.map(async (page) => {
    const content = await dv.io.load(page.file.path);
    const regex = /```timekeep\s*([\s\S]*?)\s*```/g;
    let match;
    
    while ((match = regex.exec(content)) !== null) {
        const jsonString = match[1];
        try {
            const data = JSON.parse(jsonString);
            if (data.entries) {
                data.entries.forEach(entry => {
                    
                    // Hilfsfunktion zum Buchen der Zeit auf ein Projekt
                    const addTime = (projName, durationMs, startTimeIso) => {
                        if (durationMs <= 0) return;

                        // 1. Gesamtzeit buchen
                        if (!projectTimesTotal[projName]) projectTimesTotal[projName] = 0;
                        projectTimesTotal[projName] += durationMs;
                        totalTimeGlobal += durationMs;

                        // 2. Wochenzeit buchen (nur wenn Startzeit >= letzter Montag)
                        if (startTimeIso) {
                            const entryDate = new Date(startTimeIso);
                            if (entryDate >= lastMonday) {
                                if (!projectTimesWeekly[projName]) projectTimesWeekly[projName] = 0;
                                projectTimesWeekly[projName] += durationMs;
                                totalTimeWeekly += durationMs;
                            }
                        }
                    };

                    // A) PrÃ¼fen, ob es UntereintrÃ¤ge (subEntries) gibt
                    if (entry.subEntries && Array.isArray(entry.subEntries) && entry.subEntries.length > 0) {
                        entry.subEntries.forEach(sub => {
                            if (sub.startTime && sub.endTime) {
                                let dur = (new Date(sub.endTime) - new Date(sub.startTime));
                                addTime(entry.name, dur, sub.startTime);
                            }
                        });
                    } 
                    // B) Falls keine UntereintrÃ¤ge, nimm die Hauptzeit
                    else if (entry.startTime && entry.endTime) {
                        let dur = new Date(entry.endTime) - new Date(entry.startTime);
                        addTime(entry.name, dur, entry.startTime);
                    }
                });
            }
        } catch (e) {
            console.error("Fehler beim Parsen in: " + page.file.name, e);
        }
    }
}));

// 4. Formatierung (ms -> Stunden:Minuten)
function formatDuration(ms) {
    if (!ms) return "0h 00m";
    const totalMinutes = Math.floor(ms / 60000);
    const hours = Math.floor(totalMinutes / 60);
    const minutes = totalMinutes % 60;
    const minutesStr = minutes < 10 ? "0" + minutes : minutes;
    return `${hours}h ${minutesStr}m`;
}

// 5. Tabelle bauen
// Wir holen alle Projektnamen, die entweder in Total oder Weekly vorkommen
const allProjects = new Set([
    ...Object.keys(projectTimesTotal), 
    ...Object.keys(projectTimesWeekly)
]);

let tableData = Array.from(allProjects).map(project => {
    const weekly = projectTimesWeekly[project] || 0;
    const total = projectTimesTotal[project] || 0;
    return [project, formatDuration(weekly), formatDuration(total), total]; // total als 4. Wert zum Sortieren
});

// Sortieren (meiste Gesamtzeit oben)
tableData.sort((a, b) => {
    return b[3] - a[3]; // Sortieren nach dem rohen Millisekunden-Wert (Index 3)
});

// Bereinigte Daten fÃ¼r die Anzeige (Index 3 entfernen)
const displayData = tableData.map(row => [row[0], row[1], row[2]]);

// 6. Ausgabe
dv.header(2, "Arbeitszeit-Ãœbersicht");

// Zusammenfassung oben
dv.paragraph(`
**Seit Montag:** ${formatDuration(totalTimeWeekly)}  
**Gesamt:** ${formatDuration(totalTimeGlobal)}
`);

dv.table(["Projekt / Fach", "Seit Montag", "Gesamt"], displayData);
```



## Timekeep Sync Skript
```dataviewjs
const file = Array.isArray(dv.current().file.path) ? dv.current().file.path[0] : dv.current().file.path;
const tFile = app.vault.getAbstractFileByPath(file);

// 1. Gesamte Datei einlesen
const content = await app.vault.read(tFile);

// 2. Timekeep Block suchen & parsen
const timekeepMatch = content.match(/```timekeep\s+([\s\S]*?)\s+```/);

if (timekeepMatch) {
    const data = JSON.parse(timekeepMatch[1]);
    let totalMs = 0;

    // Logik fÃ¼r Entries und SubEntries
    data.entries.forEach(e => {
        if (e.startTime && e.endTime) totalMs += (new Date(e.endTime) - new Date(e.startTime));
        if (e.subEntries) {
            e.subEntries.forEach(s => {
                if (s.startTime && s.endTime) totalMs += (new Date(s.endTime) - new Date(s.startTime));
            });
        }
    });

    const totalHours = parseFloat((totalMs / 3600000).toFixed(2));

    // 3. Frontmatter aktualisieren, falls der Wert abweicht
    await app.fileManager.processFrontMatter(tFile, (frontmatter) => {
        if (frontmatter["Arbeitszeit"] !== totalHours) {
            frontmatter["Arbeitszeit"] = totalHours;
            console.log(`Sync: Arbeitszeit auf ${totalHours}h aktualisiert.`);
        }
    });

    dv.paragraph(`âœ… **Timekeep Sync aktiv:** ${totalHours}h Ã¼bertragen.`);
}
```


